# 倉庫(WMS)連携
WMSとの連携について、よくある連携を記載する。


![WMS連携](https://github.com/commerble/ecspec/blob/master/specs/media/wms.jpg)


## 商品連携
商品情報の連携を行う。
- 向き＝一般的に多いのは基幹→EC→WMS。
- EC側とWMS側で共通のコードで商品を識別する必要があるので、JAN、品番、SKU等を使ってコードを一致させる。


## 在庫連携
WMSで管理している在庫情報をECに連携する。
- 向き＝WMS→EC。
- WMSの増減を元に在庫の更新を行う。
- 絶対値と相対値で更新する方法がある。どちらが良いかは運用や仕組みに合わせる。
- WMSとECで在庫の値がズレることが稀にあるので、同期方法を検討しておく。
- 特定のタイミングから連携できなかった場合のレスキュー方法を検討しておく。WMSを全出力して、それをECに反映するルートを作るなど。


## 受注連携
ECで受注したデータをWMSに連携する。連携形式は多様なので、以下それぞれ検討する。
- 受注情報をWMSに連携し、出荷時に利用する。
- 向き＝一般的に多いのはEC→WMS。
- EC側とWMS側で共通の受注番号で商品を識別する必要がある。

## 受注ステータス連携
### 出荷指示
商品出荷指示の際、受注ステータスを出荷指示に更新
- 向き＝EC→WMS。

### 出荷済み

- 向き＝WMS→EC。
- 送り状伝票番号をWMSからECに連携する。

### 受注キャンセル、返品
- 向き＝WMS→EC。
- キャンセルになった注文番号をWMSからECに連携する。
- 在庫についても戻す場合は、WMS側で在庫を戻し、上述の「在庫連携」でECに連携する。
- EC側は「受注キャンセル」のステータス情報をもとに決済情報のキャンセルなどを行う。


## 備考(セット商品の考慮)
セット商品の考慮
- 商品A(在庫100)　商品B(在庫50) 、セット商品C(商品A＋商品B＝つまり在庫は50)
- 商品Bが単体で売れた場合、商品BとCの在庫を一つずつ減らす必要がある。

## 目次に戻る
- [目次に戻る](https://github.com/commerble/ecspec/blob/master/Readme.md)
